<h2 style="color:blue;">Ops Team Access Scenario – IAM Permissions</h2>

---

<p style="color:black;">
We have an Ops team with 10 members. All team members are mapped to the same permission group, which provides full access to EC2 and S3.
</p>

<p style="color:black;">
Recently, a new team member named <b>Sunil</b> joined the Ops team. He is very experienced with EC2, but he does not have experience with S3. Also, Sunil is a contract employee.
</p>

<p style="color:black;">
Our S3 buckets contain many objects, including confidential information. For security reasons, we do not want Sunil to have access to S3, even though he is mapped to the Ops team.
</p>

---

<p style="color:green;"><b>Requirement:</b><br>
Sunil should have only EC2 access and no S3 access, even though the Ops team has permissions for both EC2 and S3.
</p>

---

<h4 style="color:lightblue;">Question:</h4>

<p style="color:black;">
Is it possible to remove or restrict S3 access for Sunil only, while keeping EC2 access, even though he is part of the Ops team?
</p>

---

<p style="color:green;">
✍️ When we check AWS managed policies, there is no policy available to deny S3 access.
AWS does not provide a default S3 deny policy, so we need to create a separate custom policy to deny S3 access.
</p>

---

<h4 style="color:blue;">➤ In AWS IAM, go to Policies</h4>

<p style="color:black;">
➤ Click on <b>Create policy</b><br>
➤ Choose a service (search for <b>S3</b>)<br>
➤ Under <b>Effect</b>, select <b>Deny</b><br>
➤ In <b>Actions</b>, choose <b>Manual actions</b> and select <b>All S3 actions</b><br>
➤ In <b>Resources</b>, select <b>All resources</b><br>
➤ Click <b>Next</b><br>
➤ Policy Name: <b>S3-deny</b><br>
➤ Description: This policy will deny all S3 operations<br>
➤ Click <b>Create policy</b>
</p>

---

<p style="color:green;">
<b>Important Note:</b><br>
Even after creating the policy, it will not be automatically attached to any user or group.
</p>

---

<p style="color:black;">
➤ Attach the policy to the Sunil user<br>
➤ Go to <b>Users</b><br>
➤ Click <b>Add permissions → Attach policies directly</b><br>
➤ Search for <b>S3-deny</b><br>
➤ Add the permission
</p>

---

<p style="color:green;">
<b>Concept / Rule:</b><br><br>
For a user or group, if a service has both <b>Allow</b> and <b>Deny</b> permissions
(for example: S3, EC2, VPC, RDS, IAM, or any other service):<br>
➤ <b>Deny has the highest priority</b><br>
Even if a user has multiple Allow permissions at the group level or user level,
once a Deny permission is applied, all Allow permissions will be overridden.
</p>

---

<h4 style="color:blue;">Use Case:</h4>

<p style="color:black;">
Sometimes we may receive a ticket like:<br><br>
“I have full access to an S3 bucket, but I am not able to upload an object.”
</p>

<p style="color:black;">
In this case, we need to check whether any Deny permission is assigned to that user.
</p>

---

<p style="color:black;">
<b>Verification Steps:</b><br>
➤ Open the Sunil user and check the permissions<br>
➤ He has EC2-S3 full access and S3-deny permissions<br>
➤ Because of the S3-deny policy, he cannot access S3<br>
➤ The S3-deny policy is attached directly at the user level, not at the group level<br>
➤ Try to access S3 by logging in with Sunil’s credentials in another browser<br>
➤ He will not be able to access S3
</p>

---

<p style="color:green;">
<b>Final Conclusion:</b><br>
➤ Deny has the highest priority compared to Allow<br>
➤ Even if we give Administrator access, Sunil still cannot access S3
</p>
